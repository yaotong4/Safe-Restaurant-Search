import React, { useState, useEffect } from 'react';
import GoogleMapReact from 'google-map-react';
import { Skeleton } from 'antd';
import Icon from '@ant-design/icons';
import config from '../config.json';

const MarkerSvg = () => (
  <svg t="1620158503962" class="icon" viewBox="0 0 1047 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="26510" width="200" height="200"><path d="M523.906977 845.395349l-221.469768 116.688372c-35.72093 19.051163-78.586047 4.762791-97.637209-30.95814-7.144186-14.288372-9.525581-30.95814-7.144186-45.246511l42.865116-247.665117-178.604651-173.84186c-28.576744-28.576744-28.576744-73.823256-2.381395-100.018605 11.906977-11.906977 26.195349-19.051163 40.483721-21.432558l247.665116-35.72093 111.925581-223.851163c16.669767-35.72093 59.534884-50.009302 95.255814-33.339535 14.288372 7.144186 26.195349 19.051163 33.339535 33.339535l111.925582 223.851163 247.665116 35.72093c38.102326 4.762791 66.67907 42.865116 59.534884 80.967442-2.381395 16.669767-9.525581 30.95814-21.432559 40.483721l-178.604651 173.84186 42.865117 247.665117c7.144186 38.102326-19.051163 76.204651-57.153489 83.348837-16.669767 2.381395-30.95814 0-45.246511-7.144186L523.906977 845.395349z" fill="#FFFFFF" p-id="26511"></path><path d="M269.097674 1004.948837c-9.525581 0-21.432558-2.381395-30.958139-4.76279-26.195349-9.525581-50.009302-26.195349-61.916279-52.390698-14.288372-19.051163-16.669767-42.865116-11.906977-66.67907l38.102326-228.613953-166.697675-161.934884c-42.865116-40.483721-42.865116-109.544186-2.381395-152.409302 16.669767-16.669767 38.102326-28.576744 61.916279-30.95814l228.613953-33.339535L428.651163 66.67907c26.195349-52.390698 90.493023-73.823256 142.883721-47.627907 21.432558 9.525581 38.102326 28.576744 47.627907 47.627907l102.4 207.181395 228.613953 33.339535c59.534884 9.525581 100.018605 61.916279 90.493023 121.451163-2.381395 23.813953-14.288372 45.246512-30.958139 61.916279l-166.697675 161.934884L881.116279 881.116279c9.525581 57.153488-28.576744 114.306977-88.111628 123.832558-23.813953 4.762791-47.627907 0-69.060465-11.906977L523.906977 885.87907l-204.8 107.16279c-16.669767 9.525581-33.339535 11.906977-50.009303 11.906977zM523.906977 78.586047c-14.288372 0-26.195349 7.144186-30.95814 19.051162l-119.069767 240.520931-266.716279 40.48372c-7.144186 0-14.288372 4.762791-21.432558 9.525582-14.288372 14.288372-14.288372 35.72093 0 50.009302l192.893023 188.130233-45.246512 264.334883c-2.381395 7.144186 0 16.669767 4.762791 23.813954 4.762791 9.525581 11.906977 14.288372 21.432558 16.669767 9.525581 2.381395 19.051163 2.381395 26.195349-2.381395l238.139535-126.213953L762.046512 928.744186c7.144186 4.762791 14.288372 4.762791 23.813953 4.762791 9.525581-2.381395 16.669767-7.144186 23.813954-14.288372 4.762791-7.144186 7.144186-16.669767 7.144186-26.195349l-45.246512-264.334884 192.893023-188.130232c4.762791-4.762791 9.525581-11.906977 9.525582-21.432559 2.381395-19.051163-11.906977-38.102326-30.95814-40.483721l-266.716279-38.102325-119.069767-240.52093c-2.381395-7.144186-9.525581-11.906977-16.669768-16.669768-4.762791-4.762791-11.906977-4.762791-16.669767-4.76279z" fill="#333333" p-id="26512"></path><path d="M523.906977 726.325581l-166.697675 88.111628c-11.906977 7.144186-26.195349 2.381395-33.339535-9.525581-2.381395-4.762791-2.381395-9.525581-2.381395-14.288372l30.95814-185.748837-135.739535-130.976745c-9.525581-9.525581-9.525581-23.813953 0-33.339534 4.762791-4.762791 9.525581-7.144186 14.288372-7.144187l188.130232-26.195348 83.348838-169.07907c4.762791-11.906977 19.051163-16.669767 30.958139-11.906977 4.762791 2.381395 9.525581 7.144186 11.906977 11.906977l83.348837 169.07907 188.130233 26.195348c11.906977 2.381395 21.432558 14.288372 19.051162 26.195349 0 4.762791-2.381395 9.525581-7.144186 14.288372l-135.739534 130.976745 30.958139 185.748837c2.381395 11.906977-7.144186 26.195349-19.051163 28.576744-4.762791 0-9.525581 0-14.288372-2.381395l-166.697674-90.493024z" fill="#EA5406" p-id="26513"></path><path d="M702.511628 852.539535c-9.525581 0-19.051163-2.381395-28.576744-7.144186L523.906977 766.809302l-150.027907 78.586047c-28.576744 14.288372-64.297674 4.762791-80.967442-23.813954-7.144186-11.906977-7.144186-26.195349-7.144186-38.102325l28.576744-166.697675-121.451163-119.069767c-23.813953-23.813953-23.813953-59.534884 0-83.348837 9.525581-9.525581 21.432558-14.288372 33.339535-16.669768l169.07907-23.813953 76.204651-152.409303c7.144186-14.288372 19.051163-23.813953 33.339535-30.958139 14.288372-4.762791 30.95814-4.762791 45.246512 2.381395 11.906977 4.762791 21.432558 14.288372 26.195348 26.195349l76.204652 152.409302 169.079069 23.813954c33.339535 4.762791 54.772093 35.72093 50.009303 66.67907-2.381395 11.906977-7.144186 26.195349-16.669768 33.339535l-121.451163 119.069767 28.576745 166.697674c4.762791 33.339535-16.669767 64.297674-47.627907 69.060466-4.762791 2.381395-9.525581 2.381395-11.906977 2.381395z m-178.604651-166.697675l161.934883 85.730233-30.958139-180.986046 130.976744-128.595349-180.986046-26.195349-80.967442-164.316279-80.967442 164.316279-180.986047 26.195349 130.976745 128.595349-30.95814 180.986046 161.934884-85.730233z" fill="#333333" p-id="26514"></path></svg>
);
const MarkerIcon = props => <Icon component={MarkerSvg} {...props} />;
const AnyReactComponent = ({ text }) => <div>{text}</div>;

function Map(props) {
  const apiKey = config.GOOGLE_MAPS_API_KEY;
  const { lat, lng } = props;

  const center = {
    lat: parseFloat(lat.toFixed(2)), 
    lng: parseFloat(lng.toFixed(2))
  };

  return (
    <div id="map">
      {(lat !== 0 && lng !== 0) ?
        <GoogleMapReact
          bootstrapURLKeys={{ key: apiKey}}
          defaultCenter={center}
          defaultZoom={12}
        >
          <MarkerIcon
            lat={lat}
            lng={lng}
          />
        </GoogleMapReact>
        :
        <Skeleton active />}
    </div>
  )
}

export default Map;